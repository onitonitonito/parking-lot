<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="ÎìúÎ°† Ìï≠Í≥µÏÇ¨ÏßÑÏóêÏÑú AIÍ∞Ä ÏûêÎèôÏúºÎ°ú Ï£ºÏ∞®Îêú Ï∞®ÎüâÏùÑ Í∞êÏßÄÌïòÍ≥† Ïπ¥Ïö¥ÌåÖÌï©ÎãàÎã§">

    <!-- PWA & Mobile Web App Meta Tags -->
    <meta name="theme-color" content="#0a0a12">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Drone Vision">

    <title>üõ∏ AI Drone Vision | Smart Parking Monitor</title>
    <!-- ÌååÎπÑÏΩò: UFO ÏïÑÏù¥ÏΩò (SVG) -->
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.svg') }}" type="image/svg+xml">
    <link rel="icon" href="{{ url_for('static', filename='favicon.svg') }}" type="image/svg+xml">

    <!-- Ìè∞Ìä∏: Rajdhani (Cyberpunk Style) + Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Rajdhani:wght@500;600;700&display=swap"
        rel="stylesheet">


    <!-- Ïä§ÌÉÄÏùºÏãúÌä∏ -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- PWA Í¥ÄÎ†® -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
</head>

<body>
    <!-- Î∞∞Í≤Ω Ïï†ÎãàÎ©îÏù¥ÏÖò -->
    <div class="background-animation">
        <div class="floating-orb orb-1"></div>
        <div class="floating-orb orb-2"></div>
        <div class="floating-orb orb-3"></div>
    </div>

    <div class="app-container">
        <!-- Ìó§Îçî (Compact HUD Style) -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">üõ∏</span>
                <div class="logo-text">
                    <h1 id="t-logoTitle">AI DRONE VISION</h1>
                    <span class="tagline" id="t-logoSub">SMART PARKING MONITOR</span>
                </div>
            </div>
            <div class="header-status">
                <!-- Language Toggle Button -->
                <button class="btn-lang" id="langToggle">
                    <span class="lang-icon">üåê</span>
                    <span id="langText">EN</span>
                </button>
                <div class="status-indicator">
                    <span class="badget-dot"></span>
                    <span id="t-status">SYSTEM ONLINE</span>
                </div>
                <div class="model-info">RT-DETR-L</div>
            </div>
        </header>

        <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† (Dashboard Layout) -->
        <main class="dashboard-grid">
            <!-- ÏôºÏ™Ω Ìå®ÎÑê: ÏûëÏóÖ ÏòÅÏó≠ (ÏóÖÎ°úÎìú/Î°úÎî©/Í≤∞Í≥º) -->
            <section class="main-panel">
                <!-- 1. ÏóÖÎ°úÎìú ÏÑπÏÖò -->
                <div id="uploadSection" class="panel-card upload-card">
                    <div class="upload-area" id="uploadArea">
                        <input type="file" id="fileInput" accept="image/*" hidden>
                        <div class="upload-content">
                            <div class="upload-icon-wrapper">
                                <span class="upload-icon">‚¨ÜÔ∏è</span>
                            </div>
                            <h3 id="t-uploadTitle">DRONE IMAGERY UPLOAD</h3>
                            <p id="t-uploadDesc">Drop image or Click to scan</p>
                        </div>
                        <div class="upload-preview" id="uploadPreview" style="display: none;">
                            <img id="previewImage" src="" alt="Preview">
                            <div class="preview-actions">
                                <button class="btn btn-primary btn-sm" id="analyzeBtn" disabled>
                                    <span id="t-btnScan">SCAN START</span>
                                </button>
                                <button class="btn btn-ghost btn-sm" id="removePreview"><span
                                        id="t-btnCancel">CANCEL</span></button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. Î°úÎî© ÏÑπÏÖò -->
                <div id="loadingSection" class="panel-card loading-card" style="display: none;">
                    <div class="scanner-wrapper">
                        <div class="scanning-line"></div>
                        <div class="dna-loader"></div>
                    </div>
                    <div class="loading-status">
                        <h3 id="t-loadingTitle">ANALYZING OBJECTS...</h3>
                        <p id="t-loadingDesc">RT-DETR Transformer Processing</p>
                    </div>
                </div>

                <!-- 3. Í≤∞Í≥º ÏÑπÏÖò -->
                <div id="resultSection" class="panel-card result-card" style="display: none;">
                    <div class="result-header">
                        <h3 id="t-resultTitle">ANALYSIS REPORT</h3>
                        <div class="result-actions">
                            <span class="timestamp" id="analysisTime">-</span>
                            <!-- Heatmap Button -->
                            <button class="btn btn-icon btn-heatmap" id="btnHeatmap" title="ÌòºÏû°ÎèÑ ÌûàÌä∏Îßµ (Heatmap)">
                                <span style="font-size: 1.2rem;">üî•</span>
                            </button>
                            <button class="btn btn-icon" id="newAnalysisBtn" title="New Scan">üîÑ</button>
                        </div>
                    </div>

                    <div class="result-body">
                        <!-- Ïù¥ÎØ∏ÏßÄ ÎπÑÍµê Î∑∞Ïñ¥ (Î©îÏù∏) -->
                        <div class="compare-viewer" id="compareContainer">
                            <img id="originalImage" class="compare-bg" src="" alt="Original">
                            <div class="compare-overlay" id="imgOverlay">
                                <img id="resultImage" class="compare-fg" src="" alt="Result">
                            </div>
                            <div class="compare-handle" id="compareHandle"></div>
                        </div>

                        <!-- ÌÜµÍ≥Ñ (ÌïòÎã® Î∞î) -->
                        <div class="stats-bar">
                            <div class="stat-group">
                                <span class="stat-label" id="t-statDetected">DETECTED VEHICLES</span>
                                <span class="stat-value highlight" id="carCount">0</span>
                            </div>
                            <div class="stat-group">
                                <span class="stat-label" id="t-statFile">FILE NAME</span>
                                <span class="stat-value text-truncate" id="fileName">-</span>
                            </div>
                        </div>

                        <!-- ÏÉÅÏÑ∏ Î∂ÑÏÑù (Ï∞®Îüâ Î∂ÑÎ•ò & ÌûàÌä∏Îßµ Îç∞Ïù¥ÌÑ∞) -->
                        <div id="breakdownBar" class="breakdown-bar">
                            <!-- JSÎ°ú ÎèôÏ†Å ÏÉùÏÑ± -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Ïò§Î•∏Ï™Ω Ìå®ÎÑê: ÌûàÏä§ÌÜ†Î¶¨ & Î°úÍ∑∏ -->
            <aside class="side-panel">
                <div class="panel-card history-card">
                    <div class="panel-header">
                        <h3 id="t-historyTitle">üìã SCAN LOGS</h3>
                        <button class="btn btn-xs" id="refreshHistoryBtn">‚Üª</button>
                    </div>
                    <div class="history-list-wrapper">
                        <div class="history-list" id="historyList">
                            <!-- JSÎ°ú Ìï≠Î™© Ï∂îÍ∞ÄÎê® -->
                            <div class="history-empty" id="historyEmpty">
                                <span id="t-historyEmpty">No Logs</span>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Ìë∏ÌÑ∞ (ÌïòÎã® ÏÉÅÌÉúÎ∞î) -->
        <footer class="footer-bar">
            <span>¬© 2026 AI DRONE VISION. v2.0</span>
            <span id="t-footerStatus">STATUS: ACTIVE</span>
        </footer>
    </div>

    <!-- Ïù¥ÎØ∏ÏßÄ Î™®Îã¨ -->
    <div class="modal" id="imageModal">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <img id="modalImage" src="" alt="ÌôïÎåÄ Ïù¥ÎØ∏ÏßÄ">
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>